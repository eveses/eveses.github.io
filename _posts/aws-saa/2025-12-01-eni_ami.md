---
title: "EC2 이미지/네트워크/저장소/파일시스템 (AMI, ENI, EBS, EFS)"
date: 2025-12-01
categories: [aws-saa]
tags: [aws, ec2, eni, ami]
---

## AMI - Amazon Machine Image

AWS에서 제공하는 머신 이미지로 3가지 방식이 존재한다.  

- Public AMI : AWS에서 제공하는 공식 이미지
- Private AMI : 사용자가 커스터마이징하여 사용하는 이미지
- Marketplace AMI : 마켓플레이스를 통해 개인 이미지를 사고팔수있음
- 리전 단위 이므로 다른 리전에서 사용하기 위해선 복사해야함

## ENI - Elastic Network Interface

인스턴스에 부착 가능한 가상 네트워크 카드.

- IP / 보안그룹 / 서브넷(AZ) 포함
- AZ에 종속되며 같은 AZ에서만 이동 가능
- 인스턴스 생성 시 Primary ENI가 생성되고 이는 제거 불가, 추가로 생성한 ENI만 가능
- 고가용성, 페일오버(장애조치) 용이
- 하나의 ENI에 여러 개의 프라이빗 IP, 퍼블릭 IP/EIP 할당 가능

*EIP : Elastic IP로, 기본적으로 EC2의 퍼블릭 IP는 중지할때마다 바뀌지만 EIP를 이용하여 고정된 IP 사용 가능

*보안그룹은 EC2 인스턴스에 붙는게 아니라 인스턴스의 ENI에 붙는것

## EBS - Elastic Block Store

인스턴스에 부착 가능한 네트워크 드라이브

- 인스턴스를 종료하더라도 같은 EBS를 다시 마운트하여 데이터 유지 가능
- 기본적으로 한번에 하나의 인스턴스에만 붙일 수 있지만 특정 EBS는 여러개에 붙일 수 있음
- 특정 AZ에 종속, 스탭샷을 통해 복제는 가능
- 하나의 인스턴스에 여러 EBS 붙이기 가능
- 인스턴스 종료시 같이 삭제될지 말지 정할 수 있음

#### EBS Snapshot Feature

- Snapshot Archive: 스냅샷 복원에 시간이 오래걸리지만 저렴
- Recycle Bin: 스냅샷 삭제시 특정 기간동안 남아있어 복구 가능한 기능
- Fast Snapshot Restore: 스냅샷으로 만든 볼륨이 처음부터 재성능으로 사용할수있도록 해주는 기능

#### EC2 Instance Store
- 물리적인 하드디스크, 고성능 하드디스크가 필요한 경우 사용
- 인스턴스가 멈출 경우 사라짐
- 장기 저장 X, 임시/버퍼/캐시 용도

#### EBS Volume Type

| 타입 | 분류                     | 특성/성능                                                   | 주요 용도                            |
|------|--------------------------|-------------------------------------------------------------|--------------------------------------|
| gp2  | SSD (범용)               | 용량(GB)에 비례해 IOPS 증가, 최대 16,000 IOPS              | 일반 워크로드, 부팅 디스크          |
| gp3  | SSD (범용)               | 기본 3,000 IOPS / 125 MB/s, 최대 16,000 IOPS / 1,000 MB/s, IOPS·처리량 별도 설정 | 대부분의 신규 워크로드, gp2 대비 저렴 |
| io1  | SSD (프로비저닝 IOPS)   | 높은 IOPS 프로비저닝, 일관된 지연시간, Multi-Attach 지원                      | 중요/고성능 DB, 트랜잭션 워크로드   |
| io2  | SSD (프로비저닝 IOPS)   | 더 높은 내구성(미션 크리티컬), 고 IOPS, Multi-Attach 지원 | 미션 크리티컬 DB, 초고성능 워크로드 |
| st1  | HDD (Throughput 최적화) | 대용량, 순차 처리에 최적, 높은 처리량, 낮은 IOPS          | 로그, 빅데이터, 데이터 웨어하우스   |
| sc1  | HDD (Cold)              | 가장 저렴, 낮은 처리량/IOPS, 부팅 볼륨 불가                | 저빈도 접근 데이터, 아카이브        |



## EFS - Elastic File System

인스턴스에 붙일 수 있는 네트워크 파일 시스템 (윈도우 공유폴더 유사).  
보안그룹 NFSv4 (포트 2049) 설정

- 리눅스 기반 인스턴스에서만 가능
- 여러 EC2에 부착 가능
- 여러 AZ에서 사용 가능 (여러 AZ에서 사용할지, 하나의 AZ에서만 사용할지 선택 가능, 비용 차이)

#### EFS Storage Classes

- Standard : 기본
- IA : 가끔 접근하는 데이터용, 저렴
- Archive : 거의 안보는 데이터용, 최저가

기본적으로 Standard이지만 설정한 특정 기간동안 접근이 없으면 IA로, 추가적으로 더 긴시간 접근이 없으면 Archive로 변경

#### Throughput mode
- Bursting: 용량에 따라 성능 결정, 클수록 성능 좋음
- Elastic: 자동 확장
- Provisioned: 미리 처리량 설정

#### Performance mode
- General Purpose : 기본값, 일반적인 용도, 지연이 낮음
- Max I/O: 빅데이터용, 처리량은 높지만 지연시간이 늘어날 수 있음



## EBS vs EFS
| 비교 항목 | EBS (Elastic Block Store) | EFS (Elastic File System) |
| :--- | :--- | :--- |
| **스토리지 유형** | **블록 스토리지** (Block) | **파일 스토리지** (Network File System) |
| **프로토콜** | 내부 블록 프로토콜 | **NFSv4** (TCP 2049) |
| **범위 (Scope)** | **가용 영역(AZ) 레벨** (특정 AZ에 종속됨)<br>*(다른 AZ로 옮기려면 스냅샷 필요)* | **리전(Region) 레벨** (Multi-AZ)<br>*(여러 AZ에 걸쳐 데이터 저장)* |
| **운영 체제(OS)** | Linux, Windows 모두 지원 | **Linux 전용** (Windows 미지원) |
| **동시 연결** | **단일 인스턴스** (기본)<br>*(io1/io2만 같은 AZ 내 멀티 어태치 가능)* | **수천 개의 인스턴스** 동시 연결 가능<br>*(여러 AZ의 인스턴스가 동시 접근)* |
| **용량 확장** | 미리 프로비저닝 필요 (수동/Elastic Volumes) | **자동 확장/축소** (파일 넣으면 늘어나고, 지우면 줄어듦) |
| **부팅 볼륨** | **가능 (O)** (루트 볼륨으로 사용) | **불가능 (X)** (데이터 저장용으로만 사용) |
| **성능 특징** | 가장 낮은 지연 시간(Latency) 제공 | 네트워크 오버헤드로 인해 EBS보다 지연 시간 높음 |
| **가격** | EFS보다 저렴함 | EBS보다 비쌈 (약 3배) |
| **핵심 사용 사례** | 고성능 DB, OS 부팅 디스크, 미션 크리티컬 앱 | 웹 서버(Web Farm) 공유 스토리지, CMS, 데이터 분석 공유 |



> **시나리오별 선택 가이드**
> - **"가용 영역(AZ) 간 데이터 공유가 필요하다"** -> **EFS**
> - **"Windows 인스턴스 간 파일 공유가 필요하다"** -> **FSx for Windows** (EFS 아님!)
> - **"가장 높은 디스크 성능과 낮은 지연 시간이 필요하다"** -> **EBS** (또는 Instance Store)
> - **"용량을 미리 추정하기 어렵고 자동으로 늘어나야 한다"** -> **EFS**